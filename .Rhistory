ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
}
# get colors ----
pal1 <- choose_palette()
pal11 <- pal1(16) #raster colors
for(i in 1:length(allrasters)){
# get raster
site.raster <- allrasters[[i]]
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[i])
# plot
png(paste(sites[i], "png", sep = "."), width = 3, height = 3.5, units = "in", pointsize =8, res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(aes(x=longitude, y=latitude, group = site, r = 0.0015), data = broad.hab1 %>% filter(site == 'Mandurah'),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"), color="black", alpha=.8, legend_name="Habitat")+
labs(title = "Mandurah", fill = "Habitat type") +
scale_fill_manual(values = pal11) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
}
site.raster <- allrasters[[1]]
site.raster
warnings()
site.name
data = broad.hab1 %>% filter(site == site.name)
data
# list names of sites ----
levels(broad.hab1$site)
for(i in 1:length(allrasters)){
# get raster
site.raster <- allrasters[[1]]
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[i])
# plot
png(paste(sites[i], "png", sep = "."), width = 5, height = 2.5, units = "in", pointsize = 8, res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(aes(x=longitude, y=latitude, group = site, r = 0.0015), data = broad.hab1 %>% filter(site == site.name),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"), color="black", alpha=.8, legend_name="Habitat")+
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal11) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
}
for(i in 1:length(allrasters)){
# get raster
site.raster <- allrasters[[1]]
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[i])
# plot
png(paste(sites[i], "png", sep = "."), width = 5, height = 2.5, units = "in", res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = broad.hab1 %>% filter(site == site.name), aes(x=longitude, y=latitude, group = site, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal11) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
}
sites <- c("Easter Island", "Wallabi Island", "Kalbarri", "Port Gregory", "Mandurah", "Garden Island",
"Two Rocks", "Lancelin", "Cervantes", "Jurien", "Freshwater", "Dongara")
for(i in 1:length(allrasters)){
# get raster
site.raster <- allrasters[[i]]
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[i])
# plot
png(paste(sites[i], "png", sep = "."),
#width = 5, height = 2.5, units = "in",
res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = broad.hab1 %>% filter(site == site.name), aes(x=longitude, y=latitude, group = site, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal11) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
}
for(i in 1:length(allrasters)){
# get raster
site.raster <- allrasters[[i]]
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[i])
# plot
png(paste(sites[i], "png", sep = "."),
width = 10, height = 5, units = "in",
res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = broad.hab1 %>% filter(site == site.name), aes(x=longitude, y=latitude, group = site, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal11) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
}
site.name
data = broad.hab1 %>% filter(site == site.name)
data
site.name <- "Port Gregory"
data = broad.hab1 %>% filter(site == site.name)
data
site.name <- paste(sites[2])
site.name
data = broad.hab1 %>% filter(site == site.name)
data
for(i in 1:length(allrasters)){
# get raster
site.raster <- allrasters[[i]]
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[2])
# plot
png(paste(sites[i], "png", sep = "."),
width = 10, height = 5, units = "in",
res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = broad.hab1 %>% filter(site == site.name), aes(x=longitude, y=latitude, group = site, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal11) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
}
for(i in 1:length(allrasters)){
# get raster
site.raster <- allrasters[[i]]
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[i])
# plot
png(paste(sites[i], "png", sep = "."),
width = 10, height = 5, units = "in",
res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = broad.hab1 %>% filter(site == site.name), aes(x=longitude, y=latitude, group = site, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal11) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
}
pal11 <- pal1(11) #raster colors
pal11
pal3 <- c("#009B9F", "#00ACAF", "#5EBCBF" ,"#97CDCF", "#C6DFE0", "#F1F1F1" ,"#E9D4E2" ,"#E2B8D3", "#D99BC5", "#D07DB7", "#C75DAA",
"#000000", "#006006", "#FFFF00", "#00F00F" ,"#6600CC", "#FF6FF6" ,"#999999")
site.name
sites <- c("Easter Island", "Wallabi Island", "Kalbarri", "Port Gregory", "Mandurah", "Garden Island",
"Two Rocks", "Lancelin", "Cervantes", "Jurien", "Freshwater", "Dongara")
for(i in 1:length(allrasters)){
# get raster
site.raster <- allrasters[[i]]
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[i])
# plot
png(paste(sites[i], "png", sep = "."),
width = 10, height = 5, units = "in",
res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = broad.hab1 %>% filter(site == site.name), aes(x=longitude, y=latitude, group = site, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal3) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
}
site.name
data
data = broad.hab1 %>% filter(site == site.name)
data
for(i in 1:length(allrasters)){
# get raster
site.raster <- allrasters[[i]]
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[i])
# plot
png(paste(sites[i], "png", sep = "."),
width = 10, height = 5, units = "in",
res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = broad.hab1[broad.hab1$site == site.name],
#data = broad.hab1 %>% filter(site == site.name),
aes(x=longitude, y=latitude, group = site, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal3) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
}
site.name
data = broad.hab1[broad.hab1$site == site.name]
for(i in 1:length(allrasters)){
# get raster
site.raster <- allrasters[[i]]
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[i])
# plot
png(paste(sites[i], "png", sep = "."),
width = 10, height = 5, units = "in",
res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = broad.hab1[broad.hab1$site == site.name,],
#data = broad.hab1 %>% filter(site == site.name),
aes(x=longitude, y=latitude, group = site, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal3) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
}
site.name
site.raster <- allrasters[[2]]
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[2])
# plot
png(paste(sites[i], "png", sep = "."),
width = 10, height = 5, units = "in",
res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = broad.hab1[broad.hab1$site == site.name,],
#data = broad.hab1 %>% filter(site == site.name),
aes(x=longitude, y=latitude, group = site, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal3) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
site.raster
site.name
site.raster <- allrasters[[2]]
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[2])
# plot
png(paste(sites[2], "png", sep = "."),
width = 10, height = 5, units = "in",
res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = broad.hab1[broad.hab1$site == site.name,],
#data = broad.hab1 %>% filter(site == site.name),
aes(x=longitude, y=latitude, group = site, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal3) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
site.name
data = broad.hab1[broad.hab1$site == site.name,]
data
