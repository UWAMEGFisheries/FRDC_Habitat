print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = df.sites[i],
#data = broad.hab1[broad.hab1$site == site.name,],
#data = broad.hab1 %>% filter(site == site.name),
aes(x=longitude, y=latitude, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal3) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
}
for(i in 1:length(allrasters)){
# get raster
site.raster <- allrasters[[i]]
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[i])
# site data
site.data <- df.sites[i]
# plot
png(paste(sites[i], "png", sep = "."),
width = 10, height = 5, units = "in",
res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = site.data,
#data = broad.hab1[broad.hab1$site == site.name,],
#data = broad.hab1 %>% filter(site == site.name),
aes(x=longitude, y=latitude, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal3) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
}
data
site.data
site.data <- as.data.frame(df.sites[1])
site.data
for(i in 1:length(allrasters)){
# get raster
site.raster <- allrasters[[i]]
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[i])
# site data
site.data <- as.data.frame(df.sites[i])
# plot
png(paste(sites[i], "png", sep = "."),
width = 10, height = 5, units = "in",
res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = site.data,
#data = broad.hab1[broad.hab1$site == site.name,],
#data = broad.hab1 %>% filter(site == site.name),
aes(x=longitude, y=latitude, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal3) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
}
site.data
names(broad.hab1)
for(i in 1:length(allrasters)){
# get raster
site.raster <- allrasters[[i]]
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[i])
# site data
site.data <- as.data.frame(df.sites[i])
names(site.data) <- names(broad.hab1)
# plot
png(paste(sites[i], "png", sep = "."),
width = 10, height = 5, units = "in",
res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = site.data,
#data = broad.hab1[broad.hab1$site == site.name,],
#data = broad.hab1 %>% filter(site == site.name),
aes(x=longitude, y=latitude, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal3) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
}
site.data
data
site.raster <- allrasters[[3]]
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[3])
# site data
site.data <- as.data.frame(df.sites[3])
names(site.data) <- names(broad.hab1)
# plot
png(paste(sites[3], "png", sep = "."),
width = 10, height = 5, units = "in",
res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = site.data,
#data = broad.hab1[broad.hab1$site == site.name,],
#data = broad.hab1 %>% filter(site == site.name),
aes(x=longitude, y=latitude, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal3) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
site.raster <- allrasters[[4]]
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[4])
# site data
site.data <- as.data.frame(df.sites[4])
names(site.data) <- names(broad.hab1)
# plot
png(paste(sites[4], "png", sep = "."),
width = 10, height = 5, units = "in",
res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = site.data,
#data = broad.hab1[broad.hab1$site == site.name,],
#data = broad.hab1 %>% filter(site == site.name),
aes(x=longitude, y=latitude, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal3) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
site.data
sites <- c("Easter Island", "Wallabi Island", "Port Gregory",  "Kalbarri", "Mandurah", "Garden Island",
"Two Rocks", "Lancelin", "Cervantes", "Jurien", "Freshwater", "Dongara")
# split df by sites ----
levels(broad.hab1$site)
#reorder levels of factor--
broad.hab1$site<- factor(broad.hab1$site, levels = c("Easter Island", "Wallabi Island",  "Port Gregory", "Kalbarri", "Mandurah", "Garden Island",
"Two Rocks", "Lancelin", "Cervantes", "Jurien", "Freshwater", "Dongara"))
levels(broad.hab1$site)
# get raster
site.raster <- allrasters[[4]]
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[4])
# site data
site.data <- as.data.frame(df.sites[4])
names(site.data) <- names(broad.hab1)
# plot
png(paste(sites[4], "png", sep = "."),
width = 10, height = 5, units = "in",
res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = site.data,
#data = broad.hab1[broad.hab1$site == site.name,],
#data = broad.hab1 %>% filter(site == site.name),
aes(x=longitude, y=latitude, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal3) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
site.raster <- allrasters[[4]]
plot(site.raster)
site.raster
site.raster <- allrasters[[2]]
site.raster
site.raster <- allrasters[[5]]
site.raster
sites <- c("Easter Island",  "Jurien", "Freshwater", "Dongara", "Wallabi Island", "Port Gregory",  "Kalbarri", "Mandurah", "Garden Island",
"Two Rocks", "Lancelin", "Cervantes")
#reorder levels of factor--
broad.hab1$site <- factor(broad.hab1$site, levels = c("Easter Island",  "Jurien", "Freshwater", "Dongara", "Wallabi Island", "Port Gregory",  "Kalbarri", "Mandurah", "Garden Island",
"Two Rocks", "Lancelin", "Cervantes"))
levels(broad.hab1$site)
for(i in 1:length(allrasters)){
# get raster
site.raster <- allrasters[[5]]
plot(site.raster)
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[4])
# site data
site.data <- as.data.frame(df.sites[4])
names(site.data) <- names(broad.hab1)
# plot
png(paste(sites[4], "png", sep = "."),
width = 10, height = 5, units = "in",
res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = site.data,
#data = broad.hab1[broad.hab1$site == site.name,],
#data = broad.hab1 %>% filter(site == site.name),
aes(x=longitude, y=latitude, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal3) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
}
for(i in 1:length(allrasters)){
# get raster
site.raster <- allrasters[[i]]
plot(site.raster)
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[i])
# site data
site.data <- as.data.frame(df.sites[i])
names(site.data) <- names(broad.hab1)
# plot
png(paste(sites[i], "png", sep = "."),
width = 10, height = 5, units = "in",
res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = site.data,
#data = broad.hab1[broad.hab1$site == site.name,],
#data = broad.hab1 %>% filter(site == site.name),
aes(x=longitude, y=latitude, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal3) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
}
site.raster <- allrasters[[5]]
plot(site.raster)
site.raster
site.name <- paste(sites[5])
site.name
site.data <- as.data.frame(df.sites[5])
site.data
site.name
#reorder levels of factor--
broad.hab1$site <- factor(broad.hab1$site, levels = c("Easter Island",  "Jurien", "Freshwater", "Dongara", "Wallabi Island", "Port Gregory",  "Kalbarri", "Mandurah", "Garden Island",
"Two Rocks", "Lancelin", "Cervantes"))
levels(broad.hab1$site)
df.sites <- split(broad.hab1, broad.hab1$site)
df.sites[1]
df.sites[5]
for(i in 1:length(allrasters)){
# get raster
site.raster <- allrasters[[5]]
plot(site.raster)
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[5])
# site data
site.data <- as.data.frame(df.sites[5])
names(site.data) <- names(broad.hab1)
# plot
png(paste(sites[i], "png", sep = "."),
width = 10, height = 5, units = "in",
res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = site.data,
#data = broad.hab1[broad.hab1$site == site.name,],
#data = broad.hab1 %>% filter(site == site.name),
aes(x=longitude, y=latitude, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal3) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
}
for(i in 1:length(allrasters)){
# get raster
site.raster <- allrasters[[i]]
plot(site.raster)
# get raster extent
site.extent <- site.raster@extent
xmin <- site.extent@xmin
xmax <- site.extent@xmax
ymin <- site.extent@ymin
ymax <- site.extent@ymax
# raster as data frame for plotting
rdf <- raster::as.data.frame(site.raster, xy=T)
#rename columns
names(rdf) <- c('x', 'y', 'class')
# get site name
site.name <- paste(sites[i])
# site data
site.data <- as.data.frame(df.sites[i])
names(site.data) <- names(broad.hab1)
# plot
png(paste(sites[i], "png", sep = "."),
width = 10, height = 5, units = "in",
res = 600)
print(
ggplot() +
geom_raster(data = rdf, aes(x=x, y=y, fill = factor(class)), alpha = 0.5) +
#scale_fill_manual(values = pal11) +
geom_polygon(data = sh_df, aes(x = long, y = lat, group = group), color = 'black', fill = 'grey90', size = .2) +
coord_cartesian(xlim = c(xmin,  xmax), ylim =  c(ymin, ymax)) +
geom_scatterpie(data = site.data,
#data = broad.hab1[broad.hab1$site == site.name,],
#data = broad.hab1 %>% filter(site == site.name),
aes(x=longitude, y=latitude, r = 0.0015),
cols = c("Seagrasses", "Macroalgae", "Sand", "Consolidated",  "Sponges", "Corals", "Unknown"),
color="black", alpha=.8, legend_name="Habitat") +
labs(title = site.name, fill = "Habitat type") +
scale_fill_manual(values = pal3) +
xlab('Longitude') +
ylab('Latitude') +
#labs(size = "Percent cover")+
theme_bw() +
theme_collapse +
theme.larger.text
)
dev.off()
}
